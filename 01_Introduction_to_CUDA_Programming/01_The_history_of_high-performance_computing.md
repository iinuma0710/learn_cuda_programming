# The history of high-performance computing
HPC は科学的な発見のために，常にその限界を押し上げてきた．
プロセッサのアーキテクチャとデザインの根本的な転換によって，「FLOP の壁」をいくつも乗り越えてきた．
それは，**Mega-Floating Point Operations (MFLOPs)** から始まり，今では1秒で PetaFLOP 級の計算も可能になった．

※ Floating-Point Operations (FLOPs) per second : 
理論上，1秒間に浮動小数点演算が何回できるかを示す尺度 ([Wikipedia](https://ja.wikipedia.org/wiki/FLOPS#:~:text=FLOPS%EF%BC%88%E3%83%95%E3%83%AD%E3%83%83%E3%83%97%E3%82%B9%E3%80%81Floating%2Dpoint,%E6%80%A7%E8%83%BD%E6%8C%87%E6%A8%99%E3%81%AE%E4%B8%80%E3%81%A4%E3%80%82))  
※ Instruction-Level Parallelism (ILP) : 
プログラムの中で並行して実行できる処理がいくつあるかを示す尺度 ([Wikipedia](https://ja.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E4%B8%A6%E5%88%97%E6%80%A7))

新しいプロセッサ設計の重要な変化と科学者のコミュニティへの影響を引き起こした，
技術の変遷という観点から HPC の歴史を見たとき，次のように大きく3つの時代に分けることができるだろう．

- Epoch 1  
  スーパーコンピュータの歴史は CRAY-1 まで遡る．  
  基本的なシングル・ベクタ CPU アーキテクチャで，最大 160MFLOPs の計算能力を持つ．
- Epoch 2  
  CRAY-2 はシングルコアからマルチコアを採用することで，「MegaFLOP の壁」を破った．  
  4コアのベクタ CPU で，最大で 2GFLOPs の計算力があった．
- Epoch 3  
  「GigaFLOP」の壁を越えたのは，根本的な変革で，より高い性能を得るために複数のコンピュータ・ノードと
  ネットワークによる相互接続が必要となった．
  CRAY T3D は 1TFLOPs を達成した最初のコンピュータの一つである．
  3D Torus ネットワークは 300MB/s の帯域幅があった．
  これは，標準的なマイクロプロセッサの周辺に実装された "rich shell" としては最初で重要なものである．

この後，ほぼ20年の間，根本的な変革はなかった．
技術革新は，次の3つのアーキテクチャの変革によって引き起こされる．

- 命令セットが 8-bit から，16-bit，32bit，そして 64-bit へと移行していったこと
- ILP が向上したこと
- コア数が増えたこと

これは，クロックの上昇に支えられ，今では4GHzになった．
こうした発展は，半導体産業を動かしてきた基本的な法則を根拠に実現されてきた．
ムーアの予測は数十年に渡って継続され，それは今でも続いている．
ムーアの法則は歴史的潮流の観察と投影の結果なのである．

### デナード・スケーリング (Dennard scaling)
デナード・スケーリングはムーアの法則を存続せしめるスケーリング則である．
デナードはトランジスタサイズとエネルギー密度の観察を行い，次のような式を見出した．

$$
P = QfCV^2 + VI_{leakage}
$$

$Q$ は トランジスタ数，$f$ は動作周波数，$C$ は静電容量，$V$ は動作電圧，$I_{leakage}$ は漏れ電流を表す．

デナード・スケーリングとムーアの法則は互いに関係しあっており，トランジスタサイズを小さくすることによって，
費用対効果の面でチップあたりのトランジスタ数を増やすことができるのである．

デナード・スケーリング則によれば，プロセッサの数を増やしても，チップあたりの合計の消費電力は一定となる．
2年で $1/S$ にサイズを縮小しつつ，トランジスタ数を2倍にし，周波数を40%高めることができる．
この法則は，漏れ電流が指数関数的に増加するために，65nm 以下のプロセスルールでは成り立たなくなってしまった．
漏れ電流の影響を抑えるため，プロセスに新たな技術革新がもたらされた．
しかし，電圧をスケーリングを維持するには不十分であった．
今でもプロセッサの動作電圧は1Vのままである．
もはや，消費電力を一定に保つのは不可能である．
これは，"Powerwall" としてもよく知られている．

デナード・スケーリングは1977年から1997年まで維持されたが，その後は達成できなくなった．
そのため，2007年から2017年の間に 45nm から 16nm にシュリンクは進んだが，チップサイズあたりのエネルギー密度は
3倍になってしまった．

同時に，パイプラインのステージ数も5から，最近のアーキテクチャでは15以上に増加している．
命令実行パイプラインを充足するために，投機的実行のような先端技術が使われている．
投機的実行を行うには，分岐予測やメモリ番地の予測など，プログラムの動作予測が必要となる．
予測が当たれば先に進めるが，そうでなければ結果を破棄して実行をやり直す．
パイプラインのステージが深くなると，古いソフトウェアの記述方法では，
使われないトランジスタが生じ，クロックサイクルが無駄になってしまう．
すると，アプリケーションの性能の観点で改善が見込めなくなる．